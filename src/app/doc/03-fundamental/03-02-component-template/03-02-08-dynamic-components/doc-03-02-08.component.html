<p-accordion>
  <p-accordionTab header="Dynamic Components" transitionOptions="0ms">
    <p>
      使用 &lt;ng-template&gt; 元素声明一个动态组件加载的挂载点，通过 @ViewChild() 跟 template reference variable 获取到一个
      ViewContainerRef 对象，通过调用 ViewContainerRef.createComponent() 方法，动态加载一个组件到这个挂载点；
    </p>
    <p>
      ViewContainerRef.createComponent() 方法的参数是一个 ComponentFactory 对象，通过 ComponentFactoryResolver.resolveComponentFactory()
      方法可以获取某个组件的 ComponentFactory；ComponentFactoryResolver 实例是通过 DI 注入的
    </p>
    <p>
      动态加载组件的一个整体流程：
    </p>
    <ul>
      <li>假如要在组件 A 中动态加载 B 组件</li>
      <li>在 A 组件所在的 NgModule 的 entryComponents 中声明 B 组件</li>
      <li>
        在 A 组件的 template 中通过 &lt;ng-template&gt; 声明组件的挂载点，并给 ng-template 声明一个 template reference variable（#dyn）
      </li>
      <li>在 A 组件中注入 ComponentFactoryResolver</li>
      <li>在 A 组件中通过 @ViewChild 获取到挂载点的 ViewContainerRef 对象</li>
      <li>通过 componentFactoryResolver.resolveComponentFactory(B) 方法，获取到 B 组件的 ComponentFactory</li>
      <li>通过 viewContainerRef.createElement() 方法将 B 组件加载进来</li>
    </ul>
    <p>
      <p-button label="LOAD" (onClick)="loadComponent()"></p-button>
      &nbsp;
      <p-button label="UNLOAD" (onClick)="unloadComponent()"></p-button>
    </p>
    <br />
    <p
      [ngStyle]="{
        border: '1px solid #ff0000',
        borderRadius: '3px'
      }"
    >
      <ng-template #dyn></ng-template>
    </p>
  </p-accordionTab>
</p-accordion>
